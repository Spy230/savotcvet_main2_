# Руководство по развертыванию на Netlify

## Проблема
Сайт не работал на других устройствах из-за отсутствия правильной конфигурации для одностраничных приложений (SPA).

## Решение
Добавлены файлы конфигурации для корректной работы React SPA на Netlify.

## Созданные файлы

### 1. `netlify.toml` - основная конфигурация
```toml
[build]
  publish = "dist"           # Папка для публикации
  command = "npm run build"  # Команда сборки

[[redirects]]
  from = "/*"               # Все запросы
  to = "/index.html"        # Перенаправляются на index.html
  status = 200              # Со статусом 200 (не 404)
```

### 2. `public/_redirects` - резервная конфигурация
```
/*    /index.html   200
```

### 3. Заголовки безопасности
- `X-Frame-Options: DENY` - защита от clickjacking
- `X-Content-Type-Options: nosniff` - защита от MIME sniffing
- `Referrer-Policy: strict-origin-when-cross-origin` - контроль referrer

### 4. Кэширование статических ресурсов
- CSS, JS, шрифты кэшируются на 1 год
- Улучшает производительность на всех устройствах

## Как развернуть

### Автоматический деплой через Git
1. Подключите репозиторий к Netlify
2. Netlify автоматически обнаружит `netlify.toml`
3. Настройки сборки применятся автоматически

### Ручной деплой
1. Соберите проект: `npm run build`
2. Загрузите папку `dist` на Netlify
3. Файл `_redirects` будет скопирован автоматически

## Проверка работоспособности

После деплоя проверьте:
- ✅ Главная страница загружается
- ✅ Обновление страницы не дает 404
- ✅ Прямые ссылки работают
- ✅ Сайт работает на мобильных устройствах
- ✅ Карусель "Наши работы" функционирует
- ✅ Lightbox открывается корректно

## Оптимизация производительности

### Vite конфигурация
- Разделение vendor и swiper в отдельные chunks
- Оптимизация зависимостей
- Исключение lucide-react из pre-bundling

### Netlify оптимизации
- Кэширование статических ресурсов
- Сжатие файлов
- CDN распределение

## Устранение проблем

### Если сайт все еще не работает:
1. Проверьте, что файлы `netlify.toml` и `public/_redirects` существуют
2. Убедитесь, что команда build выполняется успешно
3. Проверьте логи сборки в Netlify Dashboard
4. Очистите кэш браузера

### Проверка локально:
```bash
npm run build
npm run preview
```

## Результат
После применения этих изменений:
- ✅ Сайт работает на всех устройствах
- ✅ Нет ошибок 404 при обновлении страницы
- ✅ Прямые ссылки функционируют корректно
- ✅ Улучшена производительность за счет кэширования
- ✅ Повышена безопасность за счет заголовков